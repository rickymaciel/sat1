/*
 * UINuevaCT.java
 *
 * Created on 9 de enero de 2008, 12:01
 */

package vista;

import Datos.Consulta;
import controlador.CAlta;
import controlador.CListar;
import controlador.CUltimo;
import java.awt.Dimension;
import java.awt.Toolkit;
import java.text.DateFormat;
import java.text.NumberFormat;
import java.text.ParseException;
import java.util.ArrayList;
import java.util.Collection;
import java.util.Date;
import java.util.Enumeration;
import java.util.Iterator;
import java.util.Vector;
import javax.swing.DefaultCellEditor;
import javax.swing.JComboBox;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableColumn;
import negocios.Barrio;
import negocios.Departamento;
import negocios.DetalleCT;
import negocios.EncabezadoCT;
import negocios.Localidad;
import negocios.Matriculado;
import negocios.MostrarTotales;
import negocios.PlanoCTotal;
import negocios.PlanoTasa;
import negocios.Provincia;
import negocios.Redondear;
import negocios.SerieConstancia;
import negocios.Tasa;
import negocios.TasaSeleccionada;
import negocios.TipoSeccion;
import negocios.TipoSuperficie;
import negocios.Usuario;
import reportes.cExport_thread;

/**
 *
 * @author  Administrador
 */
public class UINuevaCT extends javax.swing.JFrame
{
////////////////
    //Encabezado

    private Matriculado matriculado=new Matriculado();

    private Provincia provincia= new Provincia();
    private Departamento departamento= new Departamento();
    private Localidad localidad= new Localidad();
    private Barrio barrio= new Barrio();
    private Usuario usuario=new Usuario();
  
    private Collection series=new ArrayList();
    private Collection planos = new ArrayList();
    private Collection planoTasas = new ArrayList();
    private Collection tasas = new ArrayList();
    private Collection tasasDelPlano = new ArrayList();
    private Collection tasasSeleccionadas = new ArrayList();
    private Collection totales = new ArrayList();
    private int tamanioVector;
    private int vector[] = new int[10];
    private PlanoCTotal planoCTotal = new PlanoCTotal();    
    //
    private Collection tiposSuperficies=new ArrayList();
    private Collection tiposSecciones=new ArrayList();
    //
    private Double total=0.0;
    private long nroConst;
/////////////////    
    //Limites de campo de formulario:
    private Long CAMPO_LONG_MAX=Long.MAX_VALUE;;
    private Integer CAMPO_INTEGER_MAX=Integer.MAX_VALUE;;
    private double CAMPO_DOBLE=Double.MAX_VALUE;
    
    private int CAMPO_DESCRIPCIONPLANO=100;
    private int CAMPO_PERITO=130;
    private int CAMPO_PROPIETARIO=130;
    private int CAMPO_RESPONSABLE=130;
    private int CAMPO_COMITENTE=130;
    private int CAMPO_NOMBREPROYECTISTA=130;
    private int CAMPO_NOMBREDIRECTOR=130;
    private int CAMPO_NOMBRECONDUCTOR=130;
    private int CAMPO_NOMBRECONSTRUCTOR=130;
    
    private int CAMPO_CALLE=100;
    private int CAMPO_NUMERO=10;
    private int CAMPO_MANZANA=10;
    private int CAMPO_LOTE=10;
    
    private int CAMPO_LEYENDA=200;
    private int CAMPO_ORDENTRABAJO=20;
    
    
    /** Creates new form UINuevaCT */
    public UINuevaCT()//Sirve cuando entra con clave admin admin
    {
        initComponents();
        // Codigo necesario para centrar la ventana
        Dimension pantalla, cuadro;
	pantalla = Toolkit.getDefaultToolkit().getScreenSize();
	cuadro = this.getSize();
	this.setLocation(((pantalla.width - cuadro.width)/2), (pantalla.height - cuadro.height)/2);
        //Fin del centrado
        this.inicializarFormularioCT();    
       
    }
    public UINuevaCT(Usuario us)// Sirve para usuario que estan dados de alta en BD
    { 
        initComponents();
        this.usuario=us;
        // Codigo necesario para centrar la ventana
        Dimension pantalla, cuadro;
	pantalla = Toolkit.getDefaultToolkit().getScreenSize();
	cuadro = this.getSize();
	this.setLocation(((pantalla.width - cuadro.width)/2), (pantalla.height - cuadro.height)/2);
        //Fin del centrado
        this.inicializarFormularioCT();    
       
    }
     public UINuevaCT(String soloSirveParaSeleccionBarrio)
    {
        
    }
    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jPanel2 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jTNumeroConstancia = new javax.swing.JTextField();
        jLabel3 = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();
        jTMatriculaSolicitante = new javax.swing.JTextField();
        jLabel15 = new javax.swing.JLabel();
        jTNombreSolicitante = new javax.swing.JTextField();
        jCheckFinObra = new javax.swing.JCheckBox();
        jCSerie = new javax.swing.JComboBox();
        jTFecha = new javax.swing.JTextField();
        jLabel23 = new javax.swing.JLabel();
        jLabel27 = new javax.swing.JLabel();
        jTSerieFactura = new javax.swing.JTextField();
        jTNumeroFactura = new javax.swing.JTextField();
        jPanel3 = new javax.swing.JPanel();
        jLabel4 = new javax.swing.JLabel();
        jTNombrePropietario = new javax.swing.JTextField();
        jLabel5 = new javax.swing.JLabel();
        jTNombreComitente = new javax.swing.JTextField();
        jLabel16 = new javax.swing.JLabel();
        jTNombrePerito = new javax.swing.JTextField();
        jLabel17 = new javax.swing.JLabel();
        jTNombreResponsable = new javax.swing.JTextField();
        jLabel18 = new javax.swing.JLabel();
        jTNombreProyectista = new javax.swing.JTextField();
        jLabel19 = new javax.swing.JLabel();
        jTNombreConductor = new javax.swing.JTextField();
        jLabel20 = new javax.swing.JLabel();
        jTNombreDirector = new javax.swing.JTextField();
        jLabel21 = new javax.swing.JLabel();
        jTNombreConstructor = new javax.swing.JTextField();
        jPanel4 = new javax.swing.JPanel();
        jScrollPane2 = new javax.swing.JScrollPane();
        jTableTrabajos = new javax.swing.JTable();
        jCPlanos = new javax.swing.JComboBox();
        jLabel22 = new javax.swing.JLabel();
        jTDescripcionPlano = new javax.swing.JTextField();
        jLabel29 = new javax.swing.JLabel();
        jPanel5 = new javax.swing.JPanel();
        jLabel7 = new javax.swing.JLabel();
        jLabel8 = new javax.swing.JLabel();
        jLabel9 = new javax.swing.JLabel();
        jTCalle = new javax.swing.JTextField();
        jLabel10 = new javax.swing.JLabel();
        jLabel11 = new javax.swing.JLabel();
        jLabel12 = new javax.swing.JLabel();
        jTNumero = new javax.swing.JTextField();
        jTManzana = new javax.swing.JTextField();
        jTLote = new javax.swing.JTextField();
        jLabel13 = new javax.swing.JLabel();
        jLabel14 = new javax.swing.JLabel();
        jTProvincia = new javax.swing.JTextField();
        jTDepartamento = new javax.swing.JTextField();
        jTLocalidad = new javax.swing.JTextField();
        jTBarrio = new javax.swing.JTextField();
        jBUbicacion = new javax.swing.JButton();
        jPanel6 = new javax.swing.JPanel();
        jScrollPane3 = new javax.swing.JScrollPane();
        jTableDetalle = new javax.swing.JTable();
        jLabel24 = new javax.swing.JLabel();
        jTSuperficieTotal = new javax.swing.JTextField();
        jLabel25 = new javax.swing.JLabel();
        jTTotal = new javax.swing.JTextField();
        jLabel26 = new javax.swing.JLabel();
        jTOrdenTrabajo = new javax.swing.JTextField();
        jBQuitarDetalle = new javax.swing.JButton();
        jBVerTotales = new javax.swing.JButton();
        jCheckSoloMinimo = new javax.swing.JCheckBox();
        jTLeyenda = new javax.swing.JTextField();
        jLabel28 = new javax.swing.JLabel();
        jBGuardar = new javax.swing.JButton();
        jBSalir = new javax.swing.JButton();
        jBImprimir = new javax.swing.JButton();
        jBNueva = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setTitle("Nueva Constancia Total");
        setResizable(false);

        jPanel1.setBorder(javax.swing.BorderFactory.createEtchedBorder());

        jPanel2.setBorder(javax.swing.BorderFactory.createEtchedBorder());

        jLabel1.setBackground(new java.awt.Color(255, 255, 204));
        jLabel1.setText("Fecha");
        jLabel1.setBorder(javax.swing.BorderFactory.createEtchedBorder(new java.awt.Color(255, 255, 102), null));
        jLabel1.setOpaque(true);

        jLabel2.setBackground(new java.awt.Color(255, 255, 204));
        jLabel2.setText("Serie");
        jLabel2.setBorder(javax.swing.BorderFactory.createEtchedBorder(new java.awt.Color(255, 255, 102), null));
        jLabel2.setOpaque(true);

        jTNumeroConstancia.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jTNumeroConstanciaKeyPressed(evt);
            }
        });

        jLabel3.setBackground(new java.awt.Color(255, 255, 204));
        jLabel3.setText("Nro Constancia");
        jLabel3.setBorder(javax.swing.BorderFactory.createEtchedBorder(new java.awt.Color(255, 255, 102), null));
        jLabel3.setOpaque(true);

        jLabel6.setBackground(new java.awt.Color(255, 255, 204));
        jLabel6.setText("Matricula Solicitante");
        jLabel6.setBorder(javax.swing.BorderFactory.createEtchedBorder(new java.awt.Color(255, 255, 102), null));
        jLabel6.setOpaque(true);

        jTMatriculaSolicitante.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jTMatriculaSolicitanteKeyPressed(evt);
            }
        });

        jLabel15.setBackground(new java.awt.Color(255, 255, 204));
        jLabel15.setText("Nombre");
        jLabel15.setBorder(javax.swing.BorderFactory.createEtchedBorder(new java.awt.Color(255, 255, 102), null));
        jLabel15.setOpaque(true);

        jTNombreSolicitante.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jTNombreSolicitanteKeyPressed(evt);
            }
        });

        jCheckFinObra.setText("Fin de Obra");
        jCheckFinObra.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
        jCheckFinObra.setMargin(new java.awt.Insets(0, 0, 0, 0));

        jCSerie.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                jCSerieItemStateChanged(evt);
            }
        });
        jCSerie.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jCSerieActionPerformed(evt);
            }
        });
        jCSerie.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jCSerieKeyReleased(evt);
            }
        });

        jTFecha.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jTFechaKeyReleased(evt);
            }
        });

        jLabel23.setBackground(new java.awt.Color(255, 255, 204));
        jLabel23.setText("Serie Factura");
        jLabel23.setBorder(javax.swing.BorderFactory.createEtchedBorder(new java.awt.Color(255, 255, 102), null));
        jLabel23.setOpaque(true);

        jLabel27.setBackground(new java.awt.Color(255, 255, 204));
        jLabel27.setText("Nro. Factura");
        jLabel27.setBorder(javax.swing.BorderFactory.createEtchedBorder(new java.awt.Color(255, 255, 102), null));
        jLabel27.setOpaque(true);

        jTSerieFactura.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jTSerieFacturaKeyPressed(evt);
            }
        });

        jTNumeroFactura.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jTNumeroFacturaKeyPressed(evt);
            }
        });

        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addGap(10, 10, 10)
                        .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 51, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jTFecha))
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addContainerGap()
                        .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                            .addComponent(jLabel23, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jLabel6, javax.swing.GroupLayout.DEFAULT_SIZE, 107, Short.MAX_VALUE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jTMatriculaSolicitante, javax.swing.GroupLayout.PREFERRED_SIZE, 87, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jTSerieFactura, javax.swing.GroupLayout.PREFERRED_SIZE, 87, javax.swing.GroupLayout.PREFERRED_SIZE))))
                .addGap(14, 14, 14)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel27, javax.swing.GroupLayout.PREFERRED_SIZE, 74, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel2, javax.swing.GroupLayout.PREFERRED_SIZE, 44, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(6, 6, 6)
                        .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel2Layout.createSequentialGroup()
                                .addComponent(jCSerie, javax.swing.GroupLayout.PREFERRED_SIZE, 59, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(21, 21, 21)
                                .addComponent(jLabel3, javax.swing.GroupLayout.PREFERRED_SIZE, 94, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(jTNumeroConstancia, javax.swing.GroupLayout.PREFERRED_SIZE, 87, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(jPanel2Layout.createSequentialGroup()
                                .addComponent(jTNumeroFactura, javax.swing.GroupLayout.PREFERRED_SIZE, 173, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(jCheckFinObra, javax.swing.GroupLayout.PREFERRED_SIZE, 89, javax.swing.GroupLayout.PREFERRED_SIZE)))
                        .addGap(11, 11, 11))
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addComponent(jLabel15, javax.swing.GroupLayout.PREFERRED_SIZE, 56, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jTNombreSolicitante, javax.swing.GroupLayout.DEFAULT_SIZE, 333, Short.MAX_VALUE)
                        .addContainerGap())))
        );
        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel2, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jCSerie, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel3, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jTNumeroConstancia, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jTFecha, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addGap(11, 11, 11)
                        .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel23, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jTSerieFactura, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel27, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jTNumeroFactura, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jCheckFinObra, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(jLabel6, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(jTMatriculaSolicitante, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(jLabel15, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(jTNombreSolicitante, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addGap(32, 32, 32))
        );

        jPanel3.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Participantes", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Tahoma", 0, 10)));

        jLabel4.setBackground(new java.awt.Color(255, 255, 204));
        jLabel4.setFont(new java.awt.Font("Tahoma", 0, 10));
        jLabel4.setText("Propietario");
        jLabel4.setBorder(javax.swing.BorderFactory.createEtchedBorder(new java.awt.Color(255, 255, 102), null));
        jLabel4.setOpaque(true);

        jTNombrePropietario.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jTNombrePropietarioKeyPressed(evt);
            }
        });

        jLabel5.setBackground(new java.awt.Color(255, 255, 204));
        jLabel5.setFont(new java.awt.Font("Tahoma", 0, 10));
        jLabel5.setText("Comitente");
        jLabel5.setBorder(javax.swing.BorderFactory.createEtchedBorder(new java.awt.Color(255, 255, 102), null));
        jLabel5.setOpaque(true);

        jTNombreComitente.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jTNombreComitenteKeyPressed(evt);
            }
        });

        jLabel16.setBackground(new java.awt.Color(255, 255, 204));
        jLabel16.setFont(new java.awt.Font("Tahoma", 0, 10));
        jLabel16.setText("Perito");
        jLabel16.setBorder(javax.swing.BorderFactory.createEtchedBorder(new java.awt.Color(255, 255, 102), null));
        jLabel16.setOpaque(true);

        jTNombrePerito.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jTNombrePeritoKeyPressed(evt);
            }
        });

        jLabel17.setBackground(new java.awt.Color(255, 255, 204));
        jLabel17.setFont(new java.awt.Font("Tahoma", 0, 10));
        jLabel17.setText("Responsable");
        jLabel17.setBorder(javax.swing.BorderFactory.createEtchedBorder(new java.awt.Color(255, 255, 102), null));
        jLabel17.setOpaque(true);

        jTNombreResponsable.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jTNombreResponsableKeyPressed(evt);
            }
        });

        jLabel18.setBackground(new java.awt.Color(255, 255, 204));
        jLabel18.setFont(new java.awt.Font("Tahoma", 0, 10));
        jLabel18.setText("Proyectista");
        jLabel18.setBorder(javax.swing.BorderFactory.createEtchedBorder(new java.awt.Color(255, 255, 102), null));
        jLabel18.setOpaque(true);

        jTNombreProyectista.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jTNombreProyectistaKeyPressed(evt);
            }
        });

        jLabel19.setBackground(new java.awt.Color(255, 255, 204));
        jLabel19.setFont(new java.awt.Font("Tahoma", 0, 10));
        jLabel19.setText("Conductor");
        jLabel19.setBorder(javax.swing.BorderFactory.createEtchedBorder(new java.awt.Color(255, 255, 102), null));
        jLabel19.setOpaque(true);

        jTNombreConductor.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jTNombreConductorKeyPressed(evt);
            }
        });

        jLabel20.setBackground(new java.awt.Color(255, 255, 204));
        jLabel20.setFont(new java.awt.Font("Tahoma", 0, 10));
        jLabel20.setText("Director");
        jLabel20.setBorder(javax.swing.BorderFactory.createEtchedBorder(new java.awt.Color(255, 255, 102), null));
        jLabel20.setOpaque(true);

        jTNombreDirector.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jTNombreDirectorKeyPressed(evt);
            }
        });

        jLabel21.setBackground(new java.awt.Color(255, 255, 204));
        jLabel21.setFont(new java.awt.Font("Tahoma", 0, 10));
        jLabel21.setText("Constructor");
        jLabel21.setBorder(javax.swing.BorderFactory.createEtchedBorder(new java.awt.Color(255, 255, 102), null));
        jLabel21.setOpaque(true);

        jTNombreConstructor.setText("POR ADMINISTRACION DEL PROPIETARIO");
        jTNombreConstructor.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jTNombreConstructorKeyPressed(evt);
            }
        });

        javax.swing.GroupLayout jPanel3Layout = new javax.swing.GroupLayout(jPanel3);
        jPanel3.setLayout(jPanel3Layout);
        jPanel3Layout.setHorizontalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addComponent(jLabel4, javax.swing.GroupLayout.PREFERRED_SIZE, 75, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jTNombrePropietario, javax.swing.GroupLayout.PREFERRED_SIZE, 223, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel18, javax.swing.GroupLayout.PREFERRED_SIZE, 75, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel20, javax.swing.GroupLayout.PREFERRED_SIZE, 75, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jTNombreDirector, javax.swing.GroupLayout.DEFAULT_SIZE, 223, Short.MAX_VALUE)
                            .addComponent(jTNombreProyectista, javax.swing.GroupLayout.DEFAULT_SIZE, 223, Short.MAX_VALUE)))
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addComponent(jLabel16, javax.swing.GroupLayout.PREFERRED_SIZE, 75, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jTNombrePerito, javax.swing.GroupLayout.PREFERRED_SIZE, 223, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel17, javax.swing.GroupLayout.PREFERRED_SIZE, 75, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel5, javax.swing.GroupLayout.PREFERRED_SIZE, 75, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel19, javax.swing.GroupLayout.PREFERRED_SIZE, 75, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel21, javax.swing.GroupLayout.PREFERRED_SIZE, 75, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jTNombreConstructor, javax.swing.GroupLayout.DEFAULT_SIZE, 226, Short.MAX_VALUE)
                    .addComponent(jTNombreConductor, javax.swing.GroupLayout.DEFAULT_SIZE, 226, Short.MAX_VALUE)
                    .addComponent(jTNombreResponsable, javax.swing.GroupLayout.DEFAULT_SIZE, 226, Short.MAX_VALUE)
                    .addComponent(jTNombreComitente, javax.swing.GroupLayout.DEFAULT_SIZE, 226, Short.MAX_VALUE)))
        );
        jPanel3Layout.setVerticalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel4, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel5, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jTNombreComitente, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jTNombrePropietario, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel16, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jTNombreResponsable, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel17, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jTNombrePerito, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel18, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jTNombreProyectista, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel19, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addGap(6, 6, 6)
                        .addComponent(jTNombreConductor, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel20, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jTNombreConstructor, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jTNombreDirector, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel21, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap())
        );

        jPanel4.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Tipos de trabajo", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Tahoma", 0, 10)));
        jPanel4.setFont(new java.awt.Font("Tahoma", 0, 8));

        jTableTrabajos.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null}
            },
            new String [] {
                "Conex. electrica", "Proy. de Inst. Elect.", "Cond. Tec. de Inst. Elec.", "Relevamiento"
            }
        ) {
            Class[] types = new Class [] {
                java.lang.Boolean.class, java.lang.Boolean.class, java.lang.Boolean.class, java.lang.Boolean.class
            };

            public Class getColumnClass(int columnIndex) {
                return types [columnIndex];
            }
        });
        jTableTrabajos.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jTableTrabajosMouseClicked(evt);
            }
            public void mouseReleased(java.awt.event.MouseEvent evt) {
                jTableTrabajosMouseReleased(evt);
            }
        });
        jScrollPane2.setViewportView(jTableTrabajos);

        jCPlanos.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jCPlanosActionPerformed(evt);
            }
        });

        jLabel22.setFont(new java.awt.Font("Tahoma", 0, 10));
        jLabel22.setText("Tasa aplicada a ...");

        jLabel29.setFont(new java.awt.Font("Tahoma", 0, 10));
        jLabel29.setText("Descripcion:");

        javax.swing.GroupLayout jPanel4Layout = new javax.swing.GroupLayout(jPanel4);
        jPanel4.setLayout(jPanel4Layout);
        jPanel4Layout.setHorizontalGroup(
            jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel4Layout.createSequentialGroup()
                .addComponent(jLabel22)
                .addGap(18, 18, 18)
                .addComponent(jCPlanos, 0, 231, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jLabel29, javax.swing.GroupLayout.PREFERRED_SIZE, 62, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jTDescripcionPlano, javax.swing.GroupLayout.PREFERRED_SIZE, 213, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addComponent(jScrollPane2, javax.swing.GroupLayout.DEFAULT_SIZE, 611, Short.MAX_VALUE)
        );
        jPanel4Layout.setVerticalGroup(
            jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel4Layout.createSequentialGroup()
                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel22)
                    .addComponent(jTDescripcionPlano, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jCPlanos, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel29))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 52, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
        );

        jPanel5.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Ubicacion de la obra", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Tahoma", 0, 10)));

        jLabel7.setText("Provincia");

        jLabel8.setText("Localidad");

        jLabel9.setText("Depto");

        jTCalle.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jTCalleKeyPressed(evt);
            }
        });

        jLabel10.setFont(new java.awt.Font("Tahoma", 0, 10));
        jLabel10.setText("Calle");

        jLabel11.setFont(new java.awt.Font("Tahoma", 0, 10));
        jLabel11.setText("Nro.");

        jLabel12.setFont(new java.awt.Font("Tahoma", 0, 10));
        jLabel12.setText("Manzana");

        jTNumero.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jTNumeroKeyPressed(evt);
            }
        });

        jTManzana.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jTManzanaKeyPressed(evt);
            }
        });

        jTLote.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jTLoteKeyPressed(evt);
            }
        });

        jLabel13.setFont(new java.awt.Font("Tahoma", 0, 10));
        jLabel13.setText("Lote");

        jLabel14.setText("Barrio");

        jTProvincia.setEnabled(false);

        jTDepartamento.setEnabled(false);

        jTLocalidad.setEnabled(false);

        jTBarrio.setEnabled(false);

        jBUbicacion.setText("Ubicacion");
        jBUbicacion.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBUbicacionActionPerformed(evt);
            }
        });
        jBUbicacion.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jBUbicacionKeyPressed(evt);
            }
        });

        javax.swing.GroupLayout jPanel5Layout = new javax.swing.GroupLayout(jPanel5);
        jPanel5.setLayout(jPanel5Layout);
        jPanel5Layout.setHorizontalGroup(
            jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel5Layout.createSequentialGroup()
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel5Layout.createSequentialGroup()
                        .addComponent(jLabel7)
                        .addGap(5, 5, 5)
                        .addComponent(jTProvincia, javax.swing.GroupLayout.PREFERRED_SIZE, 203, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(jPanel5Layout.createSequentialGroup()
                        .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel8)
                            .addComponent(jLabel10))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(jTLocalidad)
                            .addComponent(jTCalle, javax.swing.GroupLayout.DEFAULT_SIZE, 203, Short.MAX_VALUE))))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel9)
                    .addComponent(jLabel14)
                    .addComponent(jLabel11))
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel5Layout.createSequentialGroup()
                        .addGap(1, 1, 1)
                        .addComponent(jTNumero, javax.swing.GroupLayout.PREFERRED_SIZE, 53, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jLabel12)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jTManzana, javax.swing.GroupLayout.PREFERRED_SIZE, 51, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jLabel13)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jTLote, javax.swing.GroupLayout.PREFERRED_SIZE, 54, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(jPanel5Layout.createSequentialGroup()
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                            .addComponent(jTBarrio, javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jTDepartamento, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 163, Short.MAX_VALUE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jBUbicacion, javax.swing.GroupLayout.DEFAULT_SIZE, 144, Short.MAX_VALUE)))
                .addContainerGap())
        );
        jPanel5Layout.setVerticalGroup(
            jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel5Layout.createSequentialGroup()
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel7)
                    .addComponent(jTProvincia, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel9)
                    .addComponent(jTDepartamento, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jBUbicacion))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel8)
                    .addComponent(jTLocalidad, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel14)
                    .addComponent(jTBarrio, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel10)
                    .addComponent(jTCalle, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel11)
                    .addComponent(jLabel12)
                    .addComponent(jTManzana, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel13)
                    .addComponent(jTLote, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jTNumero, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(37, 37, 37))
        );

        jPanel6.setBorder(javax.swing.BorderFactory.createTitledBorder("Detalle"));

        jTableDetalle.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null}
            },
            new String [] {
                "Tipo Superficie", "Tipo Nivel", "Superficie"
            }
        ) {
            Class[] types = new Class [] {
                java.lang.Object.class, java.lang.Object.class, java.lang.Double.class
            };

            public Class getColumnClass(int columnIndex) {
                return types [columnIndex];
            }
        });
        jTableDetalle.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jTableDetalleKeyPressed(evt);
            }
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jTableDetalleKeyReleased(evt);
            }
        });
        jScrollPane3.setViewportView(jTableDetalle);

        jLabel24.setFont(new java.awt.Font("Tahoma", 0, 10));
        jLabel24.setText("Superficie Total");

        jTSuperficieTotal.setFont(new java.awt.Font("Tahoma", 0, 10));

        jLabel25.setFont(new java.awt.Font("Tahoma", 0, 10));
        jLabel25.setText("Total");

        jTTotal.setFont(new java.awt.Font("Tahoma", 0, 10));

        jLabel26.setFont(new java.awt.Font("Tahoma", 0, 10));
        jLabel26.setText("Orden de Trab.N°");

        jTOrdenTrabajo.setFont(new java.awt.Font("Tahoma", 0, 10));

        jBQuitarDetalle.setIcon(new javax.swing.ImageIcon(getClass().getResource("/iconos/remove.gif"))); // NOI18N
        jBQuitarDetalle.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBQuitarDetalleActionPerformed(evt);
            }
        });

        jBVerTotales.setText("VER TOTALES");
        jBVerTotales.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBVerTotalesActionPerformed(evt);
            }
        });

        jCheckSoloMinimo.setSelected(true);
        jCheckSoloMinimo.setText("Comprobar Minimo de Tasas");
        jCheckSoloMinimo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jCheckSoloMinimoActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel6Layout = new javax.swing.GroupLayout(jPanel6);
        jPanel6.setLayout(jPanel6Layout);
        jPanel6Layout.setHorizontalGroup(
            jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel6Layout.createSequentialGroup()
                .addComponent(jScrollPane3, javax.swing.GroupLayout.DEFAULT_SIZE, 428, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(jPanel6Layout.createSequentialGroup()
                        .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addGroup(jPanel6Layout.createSequentialGroup()
                                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                    .addComponent(jLabel25, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .addComponent(jLabel26, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.PREFERRED_SIZE, 103, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED))
                            .addGroup(javax.swing.GroupLayout.Alignment.LEADING, jPanel6Layout.createSequentialGroup()
                                .addComponent(jLabel24, javax.swing.GroupLayout.PREFERRED_SIZE, 103, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                            .addComponent(jTOrdenTrabajo)
                            .addComponent(jTTotal)
                            .addComponent(jTSuperficieTotal, javax.swing.GroupLayout.DEFAULT_SIZE, 62, Short.MAX_VALUE)))
                    .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                        .addComponent(jCheckSoloMinimo, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel6Layout.createSequentialGroup()
                            .addComponent(jBQuitarDetalle, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGap(18, 18, 18)
                            .addComponent(jBVerTotales, javax.swing.GroupLayout.PREFERRED_SIZE, 129, javax.swing.GroupLayout.PREFERRED_SIZE)))))
        );
        jPanel6Layout.setVerticalGroup(
            jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel6Layout.createSequentialGroup()
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel24)
                    .addComponent(jTSuperficieTotal, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel25)
                    .addComponent(jTTotal, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel26)
                    .addComponent(jTOrdenTrabajo, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jCheckSoloMinimo)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jBVerTotales, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jBQuitarDetalle, javax.swing.GroupLayout.PREFERRED_SIZE, 32, javax.swing.GroupLayout.PREFERRED_SIZE)))
            .addComponent(jScrollPane3, javax.swing.GroupLayout.DEFAULT_SIZE, 131, Short.MAX_VALUE)
        );

        jLabel28.setText("Leyenda:");

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(jPanel4, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(jPanel3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel28, javax.swing.GroupLayout.PREFERRED_SIZE, 72, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jTLeyenda, javax.swing.GroupLayout.PREFERRED_SIZE, 523, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(20, Short.MAX_VALUE))
            .addComponent(jPanel5, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(jPanel6, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addComponent(jPanel2, javax.swing.GroupLayout.PREFERRED_SIZE, 101, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(1, 1, 1)
                .addComponent(jPanel4, javax.swing.GroupLayout.PREFERRED_SIZE, 108, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jPanel3, javax.swing.GroupLayout.PREFERRED_SIZE, 128, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jLabel28)
                    .addComponent(jTLeyenda, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jPanel5, javax.swing.GroupLayout.PREFERRED_SIZE, 105, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jPanel6, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        jBGuardar.setText("Guardar");
        jBGuardar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBGuardarActionPerformed(evt);
            }
        });
        jBGuardar.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jBGuardarKeyPressed(evt);
            }
        });

        jBSalir.setText("Salir");
        jBSalir.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBSalirActionPerformed(evt);
            }
        });
        jBSalir.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jBSalirKeyPressed(evt);
            }
        });

        jBImprimir.setText("Imprimir");
        jBImprimir.setEnabled(false);
        jBImprimir.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBImprimirActionPerformed(evt);
            }
        });
        jBImprimir.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jBImprimirKeyPressed(evt);
            }
        });

        jBNueva.setText("Nueva");
        jBNueva.setEnabled(false);
        jBNueva.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBNuevaActionPerformed(evt);
            }
        });
        jBNueva.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jBNuevaKeyPressed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap(121, Short.MAX_VALUE)
                .addComponent(jBNueva, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jBImprimir, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jBGuardar, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jBSalir, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(94, 94, 94))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jBSalir, javax.swing.GroupLayout.PREFERRED_SIZE, 25, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jBGuardar, javax.swing.GroupLayout.PREFERRED_SIZE, 25, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jBImprimir)
                    .addComponent(jBNueva))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void jBVerTotalesActionPerformed(java.awt.event.ActionEvent evt)//GEN-FIRST:event_jBVerTotalesActionPerformed
    {//GEN-HEADEREND:event_jBVerTotalesActionPerformed
// TODO add your handling code here:
        UIMostrarTotales mostrar = new UIMostrarTotales(this, true);
        mostrar.mostrar(this.totales);
        mostrar.setVisible(true);
    }//GEN-LAST:event_jBVerTotalesActionPerformed

    private void jBGuardarActionPerformed(java.awt.event.ActionEvent evt)//GEN-FIRST:event_jBGuardarActionPerformed
    {//GEN-HEADEREND:event_jBGuardarActionPerformed
// TODO add your handling code here:
        if(this.controlar())
            this.guardarCT();
        else
            JOptionPane.showMessageDialog(null, "Faltan datos o algunos de los datos estan mal cargados", "Verifique los datos", JOptionPane.ERROR_MESSAGE);
        
    }//GEN-LAST:event_jBGuardarActionPerformed

    private void jBSalirActionPerformed(java.awt.event.ActionEvent evt)//GEN-FIRST:event_jBSalirActionPerformed
    {//GEN-HEADEREND:event_jBSalirActionPerformed
// TODO add your handling code here:
        this.dispose();
    }//GEN-LAST:event_jBSalirActionPerformed

    @SuppressWarnings("static-access")
    private void jBQuitarDetalleActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBQuitarDetalleActionPerformed
        // TODO add your handling code here:
        if (this.jTableDetalle.getSelectedRow()!=-1){
            this.quitarLineaDetalle();
            this.calcular();
        }else{
            JOptionPane.showMessageDialog(this, "Debe seleccionar una fila de la tabla...","Atencion", JOptionPane.INFORMATION_MESSAGE);
        }
    }//GEN-LAST:event_jBQuitarDetalleActionPerformed

    private void jTableDetalleKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTableDetalleKeyReleased
        // TODO add your handling code here:
        int x = this.jTableDetalle.getSelectedRow();
        int y = this.jTableDetalle.getSelectedColumn();
        String val = "";
         if(evt.getKeyCode()==10)
         {
            if(x == 0)
            {
                if(y == 0)
                    if(this.controlarDetalle(x))
                    {
                        this.calcular();
                        //if(x == (this.jTableDetalle.getRowCount() - 1))
                        if(this.jTableDetalle.getValueAt((this.jTableDetalle.getRowCount() - 1),2) != null)
                            this.agregarLineaDetalle();
                    }
                    
                    else
                        JOptionPane.showMessageDialog(null,"Debe llenar todas las celdas de la linea de detalle", "Faltan datos",JOptionPane.ERROR_MESSAGE);
            }
            else
                this.calcular();
        }
        /* else
             if(y == 2)
                 if(!this.controlarTecla(evt.getKeyCode()))
                     this.jTableDetalle.setValueAt(val, x, 2);
          */       
    }//GEN-LAST:event_jTableDetalleKeyReleased

    private void jBUbicacionActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBUbicacionActionPerformed
        UIEligeDireccionBarrio barrios=new UIEligeDireccionBarrio(this,"JUJUY");
        barrios.setVisible(true);
    }//GEN-LAST:event_jBUbicacionActionPerformed

    private void jCPlanosActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jCPlanosActionPerformed
        // TODO add your handling code here:
        this.ajustarTabla();
    }//GEN-LAST:event_jCPlanosActionPerformed

    private void jTableTrabajosMouseReleased(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jTableTrabajosMouseReleased
        // TODO add your handling code here:
        int x = this.jTableTrabajos.getSelectedRow();
        int y = this.jTableTrabajos.getSelectedColumn();
        if(String.valueOf(this.jTableTrabajos.getValueAt(x, y)).trim().equals("true"))
            for(int i=0;i<this.jTableTrabajos.getRowCount();i++)
                if(i != x)
                    this.jTableTrabajos.setValueAt(false,i,y);
//        if(this.jTTotal.getText().trim().length() != 0)
            this.calcular();
    }//GEN-LAST:event_jTableTrabajosMouseReleased

    private void jTableTrabajosMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jTableTrabajosMouseClicked
        // TODO add your handling code here:
    }//GEN-LAST:event_jTableTrabajosMouseClicked

    private void jCSerieActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jCSerieActionPerformed
        // TODO add your handling code here:
        cargarNroConstanciaCT();
    }//GEN-LAST:event_jCSerieActionPerformed

    private void jCSerieItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_jCSerieItemStateChanged
        // TODO add your handling code here:
    }//GEN-LAST:event_jCSerieItemStateChanged

    private void jTMatriculaSolicitanteKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTMatriculaSolicitanteKeyPressed
        // TODO add your handling code here:
        char c = evt.getKeyChar();
        if (!((Character.isDigit(c) || (c == evt.VK_BACK_SPACE) ||(c == evt.VK_ENTER) ||(c == evt.VK_DELETE)  ||(c == evt.VK_ESCAPE)))) {
            getToolkit().beep();
            JOptionPane.showMessageDialog(null,"Debe introducir un valor valido ej: 12","Atencion",JOptionPane.ERROR_MESSAGE);
            this.jTMatriculaSolicitante.setText("");
            this.jTMatriculaSolicitante.requestFocus();
            evt.consume();
        }
        if(evt.getKeyCode()==27)
            this.dispose();
        if(evt.getKeyChar()==10)
        {
            if (this.jTMatriculaSolicitante.getText().trim().equals("")){
                JOptionPane.showMessageDialog(this, "Agregue un numero de matricula en el campo Matricula","Atencion", JOptionPane.INFORMATION_MESSAGE);
            }else{
                Matriculado mat=this.buscarMatriculado(this.jTMatriculaSolicitante.getText().trim());
            if (mat.getMatricula()!=0){
                this.jTNombreSolicitante.setText(String.valueOf(mat.getMatricula()).trim()+":"+mat.getTitulo().getAbreviacion().toUpperCase().trim()+" "+mat.getApellido().trim()+", "+mat.getNombres().trim());
                matriculado=mat;
            }else{
                JOptionPane.showMessageDialog(this, "El Matriculado no existe en la Base de Datos...","Atencion", JOptionPane.INFORMATION_MESSAGE);
            }
        }
        }
            
    }//GEN-LAST:event_jTMatriculaSolicitanteKeyPressed

    private void jBNuevaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBNuevaActionPerformed
        // TODO add your handling code here:
        this.nuevaConstancia();
    }//GEN-LAST:event_jBNuevaActionPerformed

    private void jBImprimirActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBImprimirActionPerformed
        // TODO add your handling code here:
        this.imprimir();
    }//GEN-LAST:event_jBImprimirActionPerformed

    private void jTFechaKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTFechaKeyReleased
        // TODO add your handling code here:
        if(evt.getKeyCode() == 27)
            this.dispose();
        if(evt.getKeyCode() == 10)
            this.jCSerie.requestFocus();
    }//GEN-LAST:event_jTFechaKeyReleased

    private void jCSerieKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jCSerieKeyReleased
        // TODO add your handling code here:
        if(evt.getKeyCode() == 27)
            this.dispose();
        //if(evt.getKeyCode() == 10)
          //  this.jCSerie.requestFocus();
    }//GEN-LAST:event_jCSerieKeyReleased

    private void jTNumeroConstanciaKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTNumeroConstanciaKeyPressed
        // TODO add your handling code here:
        if(evt.getKeyCode() == 27)
            this.dispose();
        if(evt.getKeyCode() == 10)
            this.jTSerieFactura.requestFocus();
    }//GEN-LAST:event_jTNumeroConstanciaKeyPressed

    private void jTNombreSolicitanteKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTNombreSolicitanteKeyPressed
        // TODO add your handling code here:
        if(evt.getKeyCode() == 27)
            this.dispose();
    }//GEN-LAST:event_jTNombreSolicitanteKeyPressed

    private void jTNombrePropietarioKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTNombrePropietarioKeyPressed
        // TODO add your handling code here:
        if(evt.getKeyCode() == 27)
            this.dispose();
        if(evt.getKeyCode() == 10)
            this.jTNombrePerito.requestFocus();
    }//GEN-LAST:event_jTNombrePropietarioKeyPressed

    private void jTNombrePeritoKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTNombrePeritoKeyPressed
        // TODO add your handling code here:
        if(evt.getKeyCode() == 27)
            this.dispose();
        if(evt.getKeyCode() == 10)
            this.jTNombreProyectista.requestFocus();
    }//GEN-LAST:event_jTNombrePeritoKeyPressed

    private void jTNombreProyectistaKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTNombreProyectistaKeyPressed
        // TODO add your handling code here:
        if(evt.getKeyCode() == 27)
            this.dispose();
        if(evt.getKeyCode() == 10)
            this.jTNombreDirector.requestFocus();
    }//GEN-LAST:event_jTNombreProyectistaKeyPressed

    private void jTNombreDirectorKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTNombreDirectorKeyPressed
        // TODO add your handling code here:
        if(evt.getKeyCode() == 27)
            this.dispose();
        if(evt.getKeyCode() == 10)
            this.jTNombreComitente.requestFocus();
    }//GEN-LAST:event_jTNombreDirectorKeyPressed

    private void jTNombreComitenteKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTNombreComitenteKeyPressed
        // TODO add your handling code here:
        if(evt.getKeyCode() == 27)
            this.dispose();
        if(evt.getKeyCode() == 10)
            this.jTNombreResponsable.requestFocus();
    }//GEN-LAST:event_jTNombreComitenteKeyPressed

    private void jTNombreResponsableKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTNombreResponsableKeyPressed
        // TODO add your handling code here:
        if(evt.getKeyCode() == 27)
            this.dispose();
        if(evt.getKeyCode() == 10)
            this.jTNombreConductor.requestFocus();
    }//GEN-LAST:event_jTNombreResponsableKeyPressed

    private void jTNombreConductorKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTNombreConductorKeyPressed
        // TODO add your handling code here:
        if(evt.getKeyCode() == 27)
            this.dispose();
        if(evt.getKeyCode() == 10)
            this.jTNombreConstructor.requestFocus();
    }//GEN-LAST:event_jTNombreConductorKeyPressed

    private void jTNombreConstructorKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTNombreConstructorKeyPressed
        // TODO add your handling code here:
        if(evt.getKeyCode() == 27)
            this.dispose();
        if(evt.getKeyCode() == 10)
            this.jBUbicacion.requestFocus();
    }//GEN-LAST:event_jTNombreConstructorKeyPressed

    private void jBUbicacionKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jBUbicacionKeyPressed
        // TODO add your handling code here:
        if(evt.getKeyCode() == 27)
            this.dispose();
        if(evt.getKeyCode() == 10)
        {
            UIEligeDireccionBarrio barrios=new UIEligeDireccionBarrio(this,"JUJUY");
            barrios.setVisible(true);
        }
            
    }//GEN-LAST:event_jBUbicacionKeyPressed

    private void jTCalleKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTCalleKeyPressed
        // TODO add your handling code here:
        if(evt.getKeyCode() == 27)
            this.dispose();
        if(evt.getKeyCode() == 10)
            this.jTNumero.requestFocus();
    }//GEN-LAST:event_jTCalleKeyPressed

    private void jTNumeroKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTNumeroKeyPressed
        // TODO add your handling code here:
        if(evt.getKeyCode() == 27)
            this.dispose();
        if(evt.getKeyCode() == 10)
            this.jTManzana.requestFocus();
    }//GEN-LAST:event_jTNumeroKeyPressed

    private void jTManzanaKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTManzanaKeyPressed
        // TODO add your handling code here:
        if(evt.getKeyCode() == 27)
            this.dispose();
        if(evt.getKeyCode() == 10)
            this.jTLote.requestFocus();
    }//GEN-LAST:event_jTManzanaKeyPressed

    private void jTLoteKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTLoteKeyPressed
        // TODO add your handling code here:
        if(evt.getKeyCode() == 27)
            this.dispose();
    }//GEN-LAST:event_jTLoteKeyPressed

    private void jBNuevaKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jBNuevaKeyPressed
        // TODO add your handling code here:
        if(evt.getKeyCode() == 27)
            this.dispose();
        if(evt.getKeyCode() == 10)
            this.nuevaConstancia();
    }//GEN-LAST:event_jBNuevaKeyPressed

    private void jBImprimirKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jBImprimirKeyPressed
        // TODO add your handling code here:
        if(evt.getKeyCode() == 27)
            this.dispose();
    }//GEN-LAST:event_jBImprimirKeyPressed

    private void jBGuardarKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jBGuardarKeyPressed
        // TODO add your handling code here:
        if(evt.getKeyCode() == 27)
            this.dispose();
    }//GEN-LAST:event_jBGuardarKeyPressed

    private void jBSalirKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jBSalirKeyPressed
        // TODO add your handling code here:
        if(evt.getKeyCode() == 27)
            this.dispose();
    }//GEN-LAST:event_jBSalirKeyPressed

    private void jTableDetalleKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTableDetalleKeyPressed
        // TODO add your handling code here:
        if(evt.getKeyCode() == 27)
            this.dispose();
//        if(evt.getKeyCode() == 10)
  //          this.jTNumeroFactura.requestFocus();
    }//GEN-LAST:event_jTableDetalleKeyPressed

    private void jTSerieFacturaKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTSerieFacturaKeyPressed
        // TODO add your handling code here:
        
}//GEN-LAST:event_jTSerieFacturaKeyPressed

    private void jTNumeroFacturaKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTNumeroFacturaKeyPressed
        // TODO add your handling code here:
        if(evt.getKeyCode() == 27)
            this.dispose();
        if(evt.getKeyCode() == 10)
            this.jTMatriculaSolicitante.requestFocus();
}//GEN-LAST:event_jTNumeroFacturaKeyPressed

    private void jCheckSoloMinimoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jCheckSoloMinimoActionPerformed
        this.calcular();
        
}//GEN-LAST:event_jCheckSoloMinimoActionPerformed
    
    /**
     * @param args the command line arguments
     */
    public static void main(String args[])
    {
        java.awt.EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                new UINuevaCT().setVisible(true);
            }
        });
    }
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton jBGuardar;
    private javax.swing.JButton jBImprimir;
    private javax.swing.JButton jBNueva;
    private javax.swing.JButton jBQuitarDetalle;
    private javax.swing.JButton jBSalir;
    private javax.swing.JButton jBUbicacion;
    private javax.swing.JButton jBVerTotales;
    private javax.swing.JComboBox jCPlanos;
    private javax.swing.JComboBox jCSerie;
    private javax.swing.JCheckBox jCheckFinObra;
    private javax.swing.JCheckBox jCheckSoloMinimo;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel13;
    private javax.swing.JLabel jLabel14;
    private javax.swing.JLabel jLabel15;
    private javax.swing.JLabel jLabel16;
    private javax.swing.JLabel jLabel17;
    private javax.swing.JLabel jLabel18;
    private javax.swing.JLabel jLabel19;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel20;
    private javax.swing.JLabel jLabel21;
    private javax.swing.JLabel jLabel22;
    private javax.swing.JLabel jLabel23;
    private javax.swing.JLabel jLabel24;
    private javax.swing.JLabel jLabel25;
    private javax.swing.JLabel jLabel26;
    private javax.swing.JLabel jLabel27;
    private javax.swing.JLabel jLabel28;
    private javax.swing.JLabel jLabel29;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JPanel jPanel5;
    private javax.swing.JPanel jPanel6;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JScrollPane jScrollPane3;
    private javax.swing.JTextField jTBarrio;
    private javax.swing.JTextField jTCalle;
    private javax.swing.JTextField jTDepartamento;
    private javax.swing.JTextField jTDescripcionPlano;
    private javax.swing.JTextField jTFecha;
    private javax.swing.JTextField jTLeyenda;
    private javax.swing.JTextField jTLocalidad;
    private javax.swing.JTextField jTLote;
    private javax.swing.JTextField jTManzana;
    private javax.swing.JTextField jTMatriculaSolicitante;
    private javax.swing.JTextField jTNombreComitente;
    private javax.swing.JTextField jTNombreConductor;
    private javax.swing.JTextField jTNombreConstructor;
    private javax.swing.JTextField jTNombreDirector;
    private javax.swing.JTextField jTNombrePerito;
    private javax.swing.JTextField jTNombrePropietario;
    private javax.swing.JTextField jTNombreProyectista;
    private javax.swing.JTextField jTNombreResponsable;
    private javax.swing.JTextField jTNombreSolicitante;
    private javax.swing.JTextField jTNumero;
    private javax.swing.JTextField jTNumeroConstancia;
    private javax.swing.JTextField jTNumeroFactura;
    private javax.swing.JTextField jTOrdenTrabajo;
    private javax.swing.JTextField jTProvincia;
    private javax.swing.JTextField jTSerieFactura;
    private javax.swing.JTextField jTSuperficieTotal;
    private javax.swing.JTextField jTTotal;
    private javax.swing.JTable jTableDetalle;
    private javax.swing.JTable jTableTrabajos;
    // End of variables declaration//GEN-END:variables
    
    
    private void inicializarFormularioCT(){
         this.cargarFecha();
         this.llenarTiposDePlanos();
         this.llenarSeriesActivas();
         this.cargarNroConstanciaCT();
         this.cargarOpcionesDeDetalle();
    }
    private void cargarFecha(){
//        Obtenemos la fecha actual del sistema
        Date fecha=new Date();//fecha actual
        //DateFormat df=DateFormat.getInstance();// 
        DateFormat df=DateFormat.getDateInstance();        
        this.jTFecha.setText(df.format(fecha)); 
    }
  
    private void cargarNroConstanciaCT(){
  /*
   *Carga el numero de constancia parcial correspondiente para una nueva constancia
   *de acuerdo a la Serie Elegida 
   */    
      if(this.esAutomatico())
      {
        EncabezadoCT encCT=new EncabezadoCT();
        encCT.setSerieCT(this.jCSerie.getSelectedItem().toString().trim());
       
        CUltimo numeroCT=new CUltimo();        
        nroConst=numeroCT.getUltimo(encCT);
        
//        System.out.println("SERIE:"+this.jCSerie.getSelectedItem().toString().trim()+"ULTIMO NRO DE CONST."+nroConst);
        this.jTNumeroConstancia.setText("Nro Automatico");
        this.jTSerieFactura.setEnabled(false);
        this.jTNumeroFactura.setEnabled(false);
      }
      else
      {
          this.jTNumeroConstancia.setText("");   
          this.jTSerieFactura.setEnabled(true);
          this.jTNumeroFactura.setEnabled(true);
      }
          
        
  
  }
    private void llenarTiposDePlanos()
    {
        this.getPlanoTasa();
        this.getPlanos();
        this.getTasas();
        Iterator it = this.planos.iterator();
        PlanoCTotal plano = new PlanoCTotal();
        while(it.hasNext())
        {
            plano = (PlanoCTotal)it.next();
            this.jCPlanos.addItem(plano.getNombre().trim());
        }
        plano = null;
        it = null;
    }
    private void llenarSeriesActivas(){       
 /**
  * Llena las series Activas en el combobox de series de la ventana * 
  * Donde incialmente aparecera seleccionado la serie que se encuentra        
  * por defecto.
 **/   
        CListar listar = new CListar();
        SerieConstancia ser=new SerieConstancia();
        ser.setActivo("S");
        
        series = listar.hacerListado(ser);
        listar = null;
        Iterator it = series.iterator();
        SerieConstancia s = new SerieConstancia();
        while(it.hasNext()){
            s = (SerieConstancia)it.next();
            if (s.getTipoConstancia().trim().equals("T")){//Solo carga las series de CONST PARCIALES
                this.jCSerie.addItem(s.getSerie().trim());
                if (s.getDefecto().trim().equals("S")){
                    this.jCSerie.setSelectedItem(s.getSerie().trim());
                }
            }
        }            
       
        s = null;
        it = null;        
  }
    /*
     * Obtiene una coleccion con todos los planos almacenados en la base de datos
     */
    private void getPlanos()
    {
        CListar listar = new CListar();
        this.planos = listar.hacerListado(new PlanoCTotal());
        listar = null;
    }
    
    /*
     * Obtiene el plano que tenga el mismo nombre que la variable recibida
     */
    private PlanoCTotal getPlano(String nombre)
    {
        Iterator it = this.planos.iterator();
        PlanoCTotal p = new PlanoCTotal();
        PlanoCTotal plano = new PlanoCTotal();
        while(it.hasNext())
        {
            p = (PlanoCTotal)it.next();
            if(nombre.trim().equals(p.getNombre().trim()))
                plano = p;
            p = null;
        }
        return plano;
    }
    
    private void getTasas()
    {
        CListar listar = new CListar();
        this.tasas = listar.hacerListado(new Tasa());
        listar = null;
    }
    
    private Tasa getTasa(int id)
    {
        Iterator it = this.tasas.iterator();
        Tasa t = new Tasa();
        Tasa tasa = new Tasa();
        while(it.hasNext())
        {
            t = (Tasa)it.next();
            if(t.getIdtasa() == id)
                tasa = t;
        }
        t = null;
        it = null;
        return tasa;
    }
    
    private void getPlanoTasa()
    {
        CListar listar = new CListar();
        this.planoTasas = listar.hacerListado(new PlanoTasa());
        listar = null;
    }
    
    private Collection getTasasDelPlano(int idPlano)
    {
        Iterator it = this.planoTasas.iterator();
        while(it.hasNext())
        {
            PlanoTasa p = (PlanoTasa)it.next();
            if(p.getIdplano() == idPlano)
                this.tasasDelPlano.add(p);
        }
        return this.tasasDelPlano;
    }
    
    private void ajustarTabla()
    {
        // limpio la coleccion que tiene los objetos tasa que pertenecen al plano seleccionado
        this.tasasDelPlano.clear();
        // limpio las columnas de la tabla
        this.limpiarColumnas();
        // obtengo el plano seleccionado del combo
        this.planoCTotal = this.getPlano(String.valueOf(this.jCPlanos.getSelectedItem()).trim());
        
        //agrego la leyenda que le corresponde al tipo de plano
        this.jTLeyenda.setText("");
        this.jTLeyenda.setText(this.planoCTotal.getLeyenda().trim());
        
        // obtengo una coleccion con los objetos tasa que corresponden al plano
        this.tasasDelPlano = this.getTasasDelPlano(this.planoCTotal.getIdplanoCTotal());
        // cargo un vector con el numero de orden de las tasas
        Iterator it = this.tasasDelPlano.iterator();
        Tasa t = new Tasa();
        int contador = 0;
        int i = 1;
        while(it.hasNext())
        {
            t = (Tasa)it.next();
            this.vector[contador] = i;
            contador = i;
            this.tamanioVector = i;
            i++;
        }
        t = null;
        it = null;
        this.nuevasColumnas();        
    }
    
    private void nuevasColumnas()
    {
        Iterator it = this.tasasDelPlano.iterator();
        
        DefaultTableModel modelo = (DefaultTableModel)this.jTableTrabajos.getModel();
        Tasa t = new Tasa();
        while(it.hasNext())
        {
            t = (Tasa)it.next();
            modelo.addColumn(this.getTasa(t.getIdtasa()).getDenominacion().trim());
        }
        t = null;
        it = null;
    }
            
    
    private void limpiarColumnas()
    {
        int columnas =  this.jTableTrabajos.getColumnCount();
        for(int i=0;i<columnas;i++)
            removeColumnAndData(0);
    }
    
    public void removeColumnAndData(int vColIndex) 
    {
        DefaultTableModel model = (DefaultTableModel)this.jTableTrabajos.getModel();
        Vector colIds = new Vector();
        // aqui solo relleno el vector de ids de columna con las columnas que quedan
        for(int i=0;i<this.jTableTrabajos.getColumnCount();i++)
            colIds.add(i);
        
        TableColumn col = this.jTableTrabajos.getColumnModel().getColumn(vColIndex);
        int columnModelIndex = col.getModelIndex();
        Vector data = model.getDataVector();
        //Vector colIds = model.getColumnIdentifiers();
    
        // Remove the column from the table
        this.jTableTrabajos.removeColumn(col);
    
        // Remove the column header from the table model
        colIds.removeElementAt(columnModelIndex);
    
        // Remove the column data
        for (int r=0; r<data.size(); r++) 
        {
            Vector row = (Vector)data.get(r);
            row.removeElementAt(columnModelIndex);
        }
        model.setDataVector(data, colIds);
    
        // Correct the model indices in the TableColumn objects
        // by decrementing those indices that follow the deleted column
        Enumeration enumm = this.jTableTrabajos.getColumnModel().getColumns();
        for (; enumm.hasMoreElements(); ) 
        {
            TableColumn c = (TableColumn)enumm.nextElement();
            if (c.getModelIndex() >= columnModelIndex) {
                c.setModelIndex(c.getModelIndex()-1);
            }
        }
        model.fireTableStructureChanged();
    }
    
    public Matriculado buscarMatriculado(String mat){
        CListar lista=new CListar();
        Matriculado m=new Matriculado();
        m.setMatricula(Integer.parseInt(mat.trim()));           
        Matriculado matri=lista.soloMatriculado(m);
          
        return matri;        
    }
    
    public void cargarDatosDireccion(Barrio bar)
    {
        boolean ubicacion=true;
        
        if(ubicacion)// ubicacion laboral
        {
            Consulta con = new Consulta();
            int idJujuy = 0;
            Collection co = new ArrayList();
            co = con.getProvincia("JUJUY");
            Iterator it = co.iterator();
            while(it.hasNext())
            {
                Provincia p = (Provincia)it.next();
                if(p.getNombre().trim().equals("JUJUY"))
                    idJujuy = p.getIdprovincia();
                p = null;
            }
            co = null;
            con = null;
            it = null;
            if(bar.getLocalidad().getDepartamento().getProvincia().getIdprovincia() == idJujuy)
            {
                this.jTProvincia.setText(bar.getLocalidad().getDepartamento().getProvincia().getNombre().trim());
                this.jTDepartamento.setText(bar.getLocalidad().getDepartamento().getNombre().trim());
                this.jTLocalidad.setText(bar.getLocalidad().getNombre().trim());
                this.jTBarrio.setText(bar.getNombre().trim());
                this.localidad = bar.getLocalidad();
                this.barrio = bar;
                this.departamento = bar.getLocalidad().getDepartamento();
                this.provincia = bar.getLocalidad().getDepartamento().getProvincia();
            }
            else
                JOptionPane.showMessageDialog(null,"EL domicilio debe estar ubicado en la provincia de Jujuy","Error en el domicilio",JOptionPane.ERROR_MESSAGE);
        }       
    }
    public void cargarOpcionesDeDetalle(){
        //Obtengo del Modelo del jtable la TABLECOLUMN
        TableColumn columnaSuperficie = this.jTableDetalle.getColumnModel().getColumn(0);
        TableColumn columnaSeccion = this.jTableDetalle.getColumnModel().getColumn(1);
        //Obtengo las colecciones de tipos de trabajos y superficies y secciones
        CListar listaSuperficies=new CListar();
        this.tiposSuperficies= listaSuperficies.hacerListado(new TipoSuperficie());
        CListar listaSecciones=new CListar();
        this.tiposSecciones= listaSecciones.hacerListado(new TipoSeccion());
        //Creo los combobox
        JComboBox comboBoxTipoSuperficie = new JComboBox();
        JComboBox comboBoxTipoSeccion = new JComboBox();
        //Aplico los iterators para cargar los combos        
        Iterator it2=this.tiposSuperficies.iterator();
        while (it2.hasNext()){
            TipoSuperficie tipoS=(TipoSuperficie)it2.next();
            comboBoxTipoSuperficie.addItem(tipoS.getNombre());
        }
        
        Iterator it3=this.tiposSecciones.iterator();
        while (it3.hasNext()){
            TipoSeccion tipoSe=(TipoSeccion)it3.next();
            comboBoxTipoSeccion.addItem(tipoSe.getNombre());
        }
        columnaSuperficie.setCellEditor(new DefaultCellEditor(comboBoxTipoSuperficie));
        columnaSeccion.setCellEditor(new DefaultCellEditor(comboBoxTipoSeccion));        
  }
  private void agregarLineaDetalle(){
        DefaultTableModel  modelo=new DefaultTableModel();
        modelo=(DefaultTableModel) this.jTableDetalle.getModel();
        Vector datos = new Vector();
        //String datos[]=new String[3];
        datos.add(new String());
        datos.add(new String());
        //datos.ad
        //datos[0]="";
        //datos[1]="";
        //datos[2]="";
        modelo.addRow(datos);    
   }
   private void quitarLineaDetalle(){
        DefaultTableModel  modelo=new DefaultTableModel();
        modelo=(DefaultTableModel) this.jTableDetalle.getModel();       
        modelo.removeRow(this.jTableDetalle.getSelectedRow());
        if(this.jTableDetalle.getRowCount() == 0)
            this.agregarLineaDetalle();
   }

  private void guardarCT(){
        EncabezadoCT encabezadoCT=new EncabezadoCT();        
        //Asigno Valores a la clase encabezadoCTque se  va a almacenar
        DateFormat df=DateFormat.getInstance();// 
        Date fecha=new Date();//fecha actual por defecto
        try{
            fecha=df.parse(this.jTFecha.getText().trim());
        }catch(ParseException pe){
//            System.out.println("FECHA no válida");
        }
        
        encabezadoCT.setFecha(fecha);        
        
        encabezadoCT.setMatriculado(matriculado);        
        encabezadoCT.setSerieCT(this.jCSerie.getSelectedItem().toString().trim().toUpperCase());
        
        if(this.esAutomatico()){            
            encabezadoCT.setCodigoCT(this.nroConst);
            this.jTNumeroConstancia.setText(String.valueOf(encabezadoCT.getCodigoCT()).trim());
        }else
            if(!this.controlarNumeroRepetido())
                JOptionPane.showMessageDialog(this, "El numero de constancia ingresado ya existe, cargue otro numero", "Error de duplicacion de clave", JOptionPane.ERROR_MESSAGE);
            else
            {
                encabezadoCT.setCodigoCT(Long.valueOf(this.jTNumeroConstancia.getText().trim()));
                this.nroConst = Long.valueOf(this.jTNumeroConstancia.getText().trim());
                encabezadoCT.setNumeroFactura(Long.parseLong(this.jTNumeroFactura.getText()));
                encabezadoCT.setSerieFactura(Integer.parseInt(this.jTSerieFactura.getText()));
            }
                
        
        encabezadoCT.setProvincia(this.provincia);
        encabezadoCT.setDepartamento(this.departamento);
        encabezadoCT.setLocalidad(this.localidad);
        encabezadoCT.setBarrio(this.barrio);
        //encabezadoCT.setSerieFactura(0);
        //encabezadoCT.setNumeroFactura(0);
        
        encabezadoCT.setPropietario(this.jTNombrePropietario.getText().trim().toUpperCase());
        encabezadoCT.setComitente(this.jTNombreComitente.getText().trim().toUpperCase());
        encabezadoCT.setPerito(this.jTNombrePerito.getText().trim().toUpperCase());
        encabezadoCT.setResponsable(this.jTNombreResponsable.getText().trim().toUpperCase());
        
        
        encabezadoCT.setPlanoCTotal(planoCTotal);        
        
        encabezadoCT.setNombreProyectista(this.jTNombreProyectista.getText().trim().toUpperCase());
        encabezadoCT.setNombreConductor(this.jTNombreConductor.getText().trim().toUpperCase());
        encabezadoCT.setNombreConstructor(this.jTNombreConstructor.getText().trim().toUpperCase());
        encabezadoCT.setNombreDirector(this.jTNombreDirector.getText().trim().toUpperCase());
        if (this.jCheckFinObra.isSelected()){
            encabezadoCT.setEstadoFinDeObra("S");
        }else{
            encabezadoCT.setEstadoFinDeObra("N");
        }        
        encabezadoCT.setCalle(this.jTCalle.getText().trim().toUpperCase());
        encabezadoCT.setNumero(this.jTNumero.getText().trim());
        encabezadoCT.setManzana(this.jTManzana.getText().trim().toUpperCase());
        encabezadoCT.setLote(this.jTLote.getText().trim().toUpperCase().toUpperCase());
        encabezadoCT.setAnulado("N");
        encabezadoCT.setSuperficie(Double.parseDouble(this.jTSuperficieTotal.getText().trim()));
        encabezadoCT.setTotal(total);
        encabezadoCT.setOrdenTrabajo(this.jTOrdenTrabajo.getText().trim().toUpperCase());      
        encabezadoCT.setUsuario(this.usuario); 
        
        encabezadoCT.setDescripcionPlano(this.jTDescripcionPlano.getText().trim());
        encabezadoCT.setLeyenda(this.jTLeyenda.getText().trim());
        
//        System.out.println(this.jTLeyenda.getText().trim());
        
        
        if(!this.esAutomatico())
        {
            if(this.controlarNumeroRepetido())
            {
            Boolean guardoBien=false;
            CAlta alta=new CAlta();
            int respuesta=alta.hacerAltaEncabezadoCT(encabezadoCT, this.esAutomatico());
            if (respuesta==0){
                guardoBien=true;
                for(int fila=0;fila<this.jTableDetalle.getRowCount();fila++)
                {
                    if(this.controlarDetalle(fila))
                    //if(String.valueOf(this.jTableDetalle.getValueAt(fila, 2)).trim().length() != 0)
                    {
//                        int resp=this.guardarDetalleCT(fila);
                        int resp=this.guardarDetalleCT(fila, encabezadoCT);
                        if ((resp==0) && (guardoBien))
                            guardoBien=true;
                        else
                            guardoBien=false;
                    }
                }
                if(this.guardarTasasSeleccionadas(encabezadoCT.getSerieCT(), encabezadoCT.getCodigoCT()) == 0)
                    guardoBien = true;
                else
                    guardoBien = false;
            }
            else
                guardoBien=false;
            if (guardoBien){
                JOptionPane.showMessageDialog(this,"Registro almacenado correctamente", "Almacenamiento",JOptionPane.INFORMATION_MESSAGE);        
                this.bloquearPantalla();
                this.jTNumeroConstancia.setText(String.valueOf(this.nroConst));
            }
            else
                JOptionPane.showMessageDialog(this,"No se pudo almacenar correctament el registro", "Error",JOptionPane.ERROR_MESSAGE);
            }
        }
        else
        {
            Boolean guardoBien=false;
            CAlta alta=new CAlta();
            int respuesta=alta.hacerAltaEncabezadoCT(encabezadoCT, this.esAutomatico());
            if (respuesta==0)
            {
                guardoBien=true;
                for(int fila=0;fila<this.jTableDetalle.getRowCount();fila++)
                {
                    if(this.jTableDetalle.getValueAt(fila, 2) != null)
                    {
//                        int resp=this.guardarDetalleCT(fila);
                        int resp=this.guardarDetalleCT(fila, encabezadoCT);
                        if ((resp==0) && (guardoBien))
                            guardoBien=true;
                        else
                            guardoBien=false;
                    }
                }
                if(this.guardarTasasSeleccionadas(encabezadoCT.getSerieCT(), encabezadoCT.getCodigoCT()) == 0)
                    guardoBien = true;
                else
                    guardoBien = false;
            }
            else
                guardoBien=false;
            if (guardoBien){
                JOptionPane.showMessageDialog(this,"Registro almacenado correctamente", "Almacenamiento",JOptionPane.INFORMATION_MESSAGE);        
                this.jTNumeroConstancia.setText(String.valueOf(this.nroConst));
                this.bloquearPantalla();
            }else
                JOptionPane.showMessageDialog(this,"No se pudo almacenar correctament el registro", "Error",JOptionPane.ERROR_MESSAGE);
        }
   }
   private int guardarDetalleCT(int fil, EncabezadoCT encCT){
         //Asigna a la collection de Detalles los valores
        DetalleCT detalle=new DetalleCT();            
        //
//        detalle.setSerieCT(this.jCSerie.getSelectedItem().toString().trim());
        detalle.setSerieCT(encCT.getSerieCT().trim());
        CUltimo cod=new CUltimo();        
        detalle.setIddetalleCT(cod.getUltimo(detalle));//obtengo elultimo iddetalle
        //
//        detalle.setCodigoCT(this.nroConst);
        detalle.setCodigoCT(encCT.getCodigoCT());
        detalle.setTipoSuperficie(this.getSuperficie(String.valueOf(this.jTableDetalle.getValueAt(fil, 0)).trim()));
        detalle.setTipoSeccion(this.getSeccion(String.valueOf(this.jTableDetalle.getValueAt(fil, 1)).trim()));
        
        //detalle.setSuperficie(Double.parseDouble(String.valueOf(this.jTableDetalle.getValueAt(fil, 2))));
        detalle.setSuperficie(this.calcularSuperficie(fil));
        
        CAlta alta=new CAlta();        
        int respuesta = alta.hacerAltaDetalleCT(detalle);
        
        return respuesta;
        
   }
   
   private double calcularSuperficie(int fila)
    {
        double superficie = 0.0;
        TipoSuperficie sup = new TipoSuperficie();
        sup = this.getSuperficie(String.valueOf(this.jTableDetalle.getValueAt(fila, 0)));
        superficie = Double.parseDouble(String.valueOf(this.jTableDetalle.getValueAt(fila, 2))) * sup.getModificador();
        return superficie;
    }
   
   
   private void calcular(){
        //inicializacion de variables:
        this.totales.clear();
        double superficieTotal = 0.0;
        Double total1=0.0;
        Double total2=0.0;
        
        //Calculo de Total de superficie:
        for(int i=0;i<this.jTableDetalle.getRowCount();i++){
            if(this.jTableDetalle.getValueAt(i, 2) != null)
                superficieTotal = superficieTotal + this.calcularSuperficie(i);
        }        
        Redondear r = new Redondear();
        
        superficieTotal = r.redondear(superficieTotal, 2);
        r = null;
        this.jTSuperficieTotal.setText(String.valueOf(superficieTotal));    
        
        //Obtengo los Indices que se ha seleccionado      
        Collection tasasElegidas= this.getValores();
        Iterator it = tasasElegidas.iterator();        
        this.tasasSeleccionadas.clear();//
        
        while(it.hasNext()){
            Tasa t = (Tasa)it.next();
            Double totalXTasa=superficieTotal*t.getIndice();
            
            //si esta seleccionado checkbox comprobarminimo entonces comprueba si es minimo o no
            
            if (totalXTasa<t.getTasaMinima() && this.jCheckSoloMinimo.isSelected()){
                total1=t.getTasaMinima();
            }else{                
                total1=totalXTasa;
            }
            
            
            // creo el objeto MostrarTotales par ir almacenando las tasas que se estan cobrando
            MostrarTotales m = new MostrarTotales();
            m.setTasa(t.getIndice());
            m.setDetalle(t.getDenominacion());
            m.setSuperficie(superficieTotal);
            m.setTasaMinima(t.getTasaMinima());
            // ahora agrego el objeto a la coleccion
            
            
            TasaSeleccionada tasaSeleccionada = new TasaSeleccionada();
            tasaSeleccionada.setIdTasa(t.getIdtasa());
            tasaSeleccionada.setMonto(total1);
            tasaSeleccionada.setSuperficie(Double.parseDouble(this.jTSuperficieTotal.getText()));
            tasasSeleccionadas.add(tasaSeleccionada);
            total2=total2+total1;
            m.setTatal(total1);
            this.totales.add(m);
          t = null;
        }
        it = null;
        //Muestro el Total:
        NumberFormat nf = NumberFormat.getCurrencyInstance();
        this.jTTotal.setText(nf.format(total2));         
    }
   
   
    private Collection getValores()
    {
        Collection valores = new ArrayList();
        // primero recorro el jtable para saber cuales campos estan en true
        for(int i=0;i<this.jTableTrabajos.getRowCount();i++)
            for(int j=0;j<this.tamanioVector;j++)
                if(Boolean.parseBoolean(String.valueOf(this.jTableTrabajos.getValueAt(i, j))))
                    valores.add(this.obtenerTasa(j));
        return valores;
    }
    private Tasa obtenerTasa(int columna)
    {
        Tasa tasa = new Tasa();
        int contador = 0;
        Iterator it = this.tasasDelPlano.iterator();
        while(it.hasNext())
        {
            Tasa t = (Tasa)it.next();
            if(contador == columna)
                tasa = this.getTasa(t.getIdtasa());
            contador++;
            t = null;
        }
        it = null;
        return tasa;
    }
    private boolean controlarDetalle(int x)
    {
        boolean bandera = true;
        if(this.jTableDetalle.getValueAt(x,0) == null)
            bandera = false;
        if(this.jTableDetalle.getValueAt(x,1) == null)
            bandera = false;
        if(this.jTableDetalle.getValueAt(x,2) == null)
            bandera = false;
        if(this.jTableDetalle.getValueAt(x,0).toString().trim().length() == 0)
            bandera = false;
        if(this.jTableDetalle.getValueAt(x,1).toString().trim().length() == 0)
            bandera = false;
        if(String.valueOf(this.jTableDetalle.getValueAt(x,2)).trim().length() == 0)
            bandera = false;
//        else
  //          System.out.println(String.valueOf(this.jTableDetalle.getValueAt(x,2)));
        return bandera;
    }
    private TipoSuperficie getSuperficie(String nombre)
    {
        TipoSuperficie t = new TipoSuperficie();
        Iterator it = this.tiposSuperficies.iterator();
        while(it.hasNext())
        {
            TipoSuperficie ti = (TipoSuperficie)it.next();
            if(ti.getNombre().trim().equals(nombre.trim()))
                t = ti;
            ti = null;
        }
        it = null;
        return t;
    }
    private TipoSeccion getSeccion(String nombre)
    {
        TipoSeccion t = new TipoSeccion();
        Iterator it = this.tiposSecciones.iterator();
        while(it.hasNext())
        {
            TipoSeccion ti = (TipoSeccion)it.next();
            if(ti.getNombre().trim().equals(nombre.trim()))
                t = ti;
            ti = null;
        }
        it = null;
        return t;
    }
    
    private boolean esAutomatico()
    {
        boolean bandera = true;
        String serie = this.jCSerie.getSelectedItem().toString().trim().toUpperCase();
        Iterator it = this.series.iterator();
        while(it.hasNext())
        {
            SerieConstancia s = (SerieConstancia)it.next();
            if (s.getTipoConstancia().trim().equals("T"))//Solo carga las series de CONST PARCIALES
                if(s.getSerie().trim().equals(serie.trim()))
                    if(s.getTipoDeCarga().trim().equals("M"))
                        bandera = false;
            s = null;
        }
        return bandera;
    }
    
    private boolean controlarNumeroRepetido()
    {
        boolean bandera = true;
        Consulta con = new Consulta();
        bandera = con.verificarNroConstanciaTotal(this.jTNumeroConstancia.getText().trim(), this.jCSerie.getSelectedItem().toString().trim().toUpperCase());
        con = null;
        return bandera;
    }
    
    private void bloquearPantalla()
    {
        this.jTFecha.setEnabled(false);
        this.jCSerie.setEnabled(false);
        this.jTNumeroConstancia.setEnabled(false);
        this.jTMatriculaSolicitante.setEnabled(false);
        this.jTNombreSolicitante.setEnabled(false);
        this.jCheckFinObra.setEnabled(false);
        this.jCPlanos.setEnabled(false);
        this.jTableDetalle.setEnabled(false);
        this.jTableTrabajos.setEnabled(false);
        this.jTNombreComitente.setEnabled(false);
        this.jTNombreConductor.setEnabled(false);
        this.jTNombreConstructor.setEnabled(false);
        this.jTNombreDirector.setEnabled(false);
        this.jTNombrePerito.setEnabled(false);
        this.jTNombrePropietario.setEnabled(false);
        this.jTNombreResponsable.setEnabled(false);
        this.jTNombreProyectista.setEnabled(false);
        this.jTCalle.setEnabled(false);
        this.jTNumero.setEnabled(false);
        this.jTManzana.setEnabled(false);
        this.jTLote.setEnabled(false);
        this.jTSuperficieTotal.setEnabled(false);
        this.jTTotal.setEnabled(false);
        this.jTOrdenTrabajo.setEnabled(false);
        this.jBUbicacion.setEnabled(false);
//        this.jBAgregarMatriculado.setEnabled(false);
        this.jBGuardar.setEnabled(false);
        this.jBQuitarDetalle.setEnabled(false);
        this.jBUbicacion.setEnabled(false);
        this.jTableTrabajos.setEnabled(false);
        this.jTableDetalle.setEnabled(false);
        this.jTSerieFactura.setEnabled(false);
        this.jTNumeroFactura.setEnabled(false);
        
        this.jBImprimir.setEnabled(true);
        this.jBNueva.setEnabled(true);
        this.jBGuardar.setEnabled(false);
    }
    
    private void imprimir()
    {
        cExport_thread imprimeCT=new cExport_thread(33,this.jCSerie.getSelectedItem().toString().trim(),String.valueOf(this.nroConst));
        imprimeCT.start();
    }
    
    private void quitarDetalles()
    {
        DefaultTableModel  modelo=new DefaultTableModel();
        modelo=(DefaultTableModel) this.jTableDetalle.getModel();
        while(this.jTableDetalle.getRowCount() != 0)
            modelo.removeRow(0);
        this.agregarLineaDetalle();
    }
    
    private void limpiarUbicacion()
    {
        this.jTProvincia.setText("");
        this.jTLocalidad.setText("");
        this.jTDepartamento.setText("");
        this.jTBarrio.setText("");
        this.jTCalle.setText("---");
        this.jTLote.setText("---");
        this.jTManzana.setText("---");
        this.jTNumero.setText("---");
    }
    
    private void descamarcarTrabajos()
    {
        for(int i=0 ; i<this.jTableTrabajos.getColumnCount();i++)
            this.jTableTrabajos.setValueAt(false, 0, i);
    }
    
    private void nuevaConstancia()
    {
        // primero desbloque la pantalla para poder ingresar nuevos datos
        this.jTFecha.setEnabled(true);
        this.jCSerie.setEnabled(true);
        
        if (this.esAutomatico()){
            this.jTNumeroConstancia.setEnabled(false);
        }else{
            this.jTNumeroConstancia.setEnabled(true);
        }          
        
        
        this.jTMatriculaSolicitante.setEnabled(true);
        this.jTNombreSolicitante.setEnabled(true);
        this.jCheckFinObra.setEnabled(true);
        this.jCPlanos.setEnabled(true);
        this.jTableDetalle.setEnabled(true);
        this.jTableTrabajos.setEnabled(true);
        this.jTNombreComitente.setEnabled(true);
        this.jTNombreConductor.setEnabled(true);
        this.jTNombreConstructor.setEnabled(true);
        this.jTNombreDirector.setEnabled(true);
        this.jTNombrePerito.setEnabled(true);
        this.jTNombrePropietario.setEnabled(true);
        this.jTNombreResponsable.setEnabled(true);
        this.jTNombreProyectista.setEnabled(true);
        this.jTCalle.setEnabled(true);
        this.jTNumero.setEnabled(true);
        this.jTManzana.setEnabled(true);
        this.jTLote.setEnabled(true);
        this.jTSuperficieTotal.setEnabled(true);
        this.jTTotal.setEnabled(true);
        this.jTOrdenTrabajo.setEnabled(true);
        this.jBUbicacion.setEnabled(true);
//        this.jBAgregarMatriculado.setEnabled(true);
        this.jBGuardar.setEnabled(true);
        this.jBQuitarDetalle.setEnabled(true);
        this.jBUbicacion.setEnabled(true);
        this.jTableTrabajos.setEnabled(true);
        this.jTableDetalle.setEnabled(true);
        
        
        // ahora limpio las tablas y dejos las filas en blanco
        this.quitarDetalles();
        
        // ahora limpio los campos
        this.jTFecha.setText("");
        this.jTNumeroConstancia.setText("");
        this.jTMatriculaSolicitante.setText("");
        this.jTNombreSolicitante.setText("");
        
        this.jTNombreComitente.setText("");
        this.jTNombreConductor.setText("");
        this.jTNombreConstructor.setText("");
        this.jTNombreDirector.setText("");
        this.jTNombrePerito.setText("");
        this.jTNombrePropietario.setText("");
        this.jTNombreProyectista.setText("");
        this.jTNombreResponsable.setText("");
        this.jTSerieFactura.setText("");
        this.jTNumeroFactura.setText("");
        
        this.limpiarUbicacion();
        
        this.jTSuperficieTotal.setText("");
        this.jTTotal.setText("");
        this.jTOrdenTrabajo.setText("");
        
        this.cargarFecha();
        this.cargarNroConstanciaCT();
        
        this.descamarcarTrabajos();
        this.jCheckFinObra.setSelected(false);
        // por ultimo inhabilito los botones de imprimir y nueva
        this.jBImprimir.setEnabled(false);
        this.jBNueva.setEnabled(false);
        this.jBGuardar.setEnabled(true);
    }
    
    private boolean fechaCorrectaControl(){
        Boolean fechaCorrecta=false;
        DateFormat df=DateFormat.getDateInstance();//el formato de fecha debe ser DD/MM/AAAA si quiero formato DD/MM/AAAA HH:MM:SS uso getInstance
        Date fecha;//fecha actual por defecto
        try{
            fecha=df.parse(this.jTFecha.getText().trim()); 
            fechaCorrecta=true;
        }catch(ParseException pe){
            fechaCorrecta=false;
        }        
        return fechaCorrecta;
    }
    
    private boolean controlarTecla(int tecla)
    {
        boolean bandera = true;
        if(((tecla >= 48) && (tecla <= 57)) || ((tecla >= 96) && (tecla <= 105)) || (tecla == 8) || (tecla == 127))
            bandera = true;
        else
            bandera = false;
        return bandera;
    }
    
    
    
    private boolean controlar()
    {
        boolean bandera = true;
        bandera = this.fechaCorrectaControl();
        if(this.jTNumeroConstancia.getText().trim().length()==0)
        {
            bandera = false;            
            JOptionPane.showMessageDialog(this,"Debe cargar un numero de constancia","Nro de Constancia nula",JOptionPane.ERROR_MESSAGE);
        }
        
        if(!this.esAutomatico())
        {
            if(this.jTNumeroFactura.getText().trim().length()==0)
            {
                bandera = false;            
                JOptionPane.showMessageDialog(this,"Debe cargar un numero de factura","Nro de Factura nula",JOptionPane.ERROR_MESSAGE);
            }
            if(this.jTNumeroFactura.getText().trim().length() > this.CAMPO_LONG_MAX){
                JOptionPane.showMessageDialog(this,"El numero de la factura, debe tener como maximo "+this.CAMPO_LONG_MAX+" digitos","El campo supera la cantidad permitida",JOptionPane.WARNING_MESSAGE);
                bandera = false;
            }
            if(this.jTSerieFactura.getText().trim().length()==0)
            {
                bandera = false;            
                JOptionPane.showMessageDialog(this,"Debe cargar un numero de serie de factura","Nro de Serie de Factura nula",JOptionPane.ERROR_MESSAGE);
            }
        }
        
        
        // control de participantes del proyecto        
        if(this.jTNombrePropietario.getText().trim().length() == 0){            
            JOptionPane.showMessageDialog(this,"Debe cargar un nombre de propietario, asigne un guion - si no corresponde","Se encontro un campo vacio",JOptionPane.WARNING_MESSAGE);
            bandera = false;
        }
        if(this.jTNombrePropietario.getText().trim().length() > this.CAMPO_PROPIETARIO){
            JOptionPane.showMessageDialog(this,"Nombre de propietario, debe tener como maximo "+this.CAMPO_PROPIETARIO+" letras","El campo supera la cantidad de letras permitidas",JOptionPane.WARNING_MESSAGE);
            bandera = false;
        }
        
        if(this.jTNombrePerito.getText().trim().length() == 0){
            JOptionPane.showMessageDialog(this,"Debe cargar un nombre de perito, asigne un guion - si no corresponde","Se encontro un campo vacio",JOptionPane.WARNING_MESSAGE);
            bandera = false;
        }
        if(this.jTNombrePerito.getText().trim().length() > this.CAMPO_PERITO){
            JOptionPane.showMessageDialog(this,"Nombre de perito, debe tener como maximo "+this.CAMPO_PERITO+" letras","El campo supera la cantidad de letras permitidas",JOptionPane.WARNING_MESSAGE);
            bandera = false;
        }
        
        if(this.jTNombreProyectista.getText().trim().length() == 0){
            JOptionPane.showMessageDialog(this,"Debe cargar un nombre de proyectista, asigne un guion - si no corresponde","Se encontro un campo vacio",JOptionPane.WARNING_MESSAGE);
            bandera = false;
        }
        if(this.jTNombreProyectista.getText().trim().length() > this.CAMPO_NOMBREPROYECTISTA){
            JOptionPane.showMessageDialog(this,"Nombre de proyectista, debe tener como maximo "+this.CAMPO_NOMBREPROYECTISTA+" letras","El campo supera la cantidad de letras permitidas",JOptionPane.WARNING_MESSAGE);
            bandera = false;
        }
        
        if(this.jTNombreDirector.getText().trim().length() == 0){
            JOptionPane.showMessageDialog(this,"Debe cargar un nombre de director, asigne un guion - si no corresponde","Se encontro un campo vacio",JOptionPane.WARNING_MESSAGE);
            bandera = false;
        }
        if(this.jTNombreDirector.getText().trim().length() > this.CAMPO_NOMBREDIRECTOR){
            JOptionPane.showMessageDialog(this,"Nombre de proyectista, debe tener como maximo "+this.CAMPO_NOMBREDIRECTOR+" letras","El campo supera la cantidad de letras permitidas",JOptionPane.WARNING_MESSAGE);
            bandera = false;
        }
        
        if(this.jTNombreComitente.getText().trim().length() == 0){
            JOptionPane.showMessageDialog(this,"Debe cargar un nombre de comitente, asigne un guion - si no corresponde","Se encontro un campo vacio",JOptionPane.WARNING_MESSAGE);
            bandera = false;
        }
        if(this.jTNombreComitente.getText().trim().length() > this.CAMPO_COMITENTE){
            JOptionPane.showMessageDialog(this,"Nombre de comitente, debe tener como maximo "+this.CAMPO_COMITENTE+" letras","El campo supera la cantidad de letras permitidas",JOptionPane.WARNING_MESSAGE);
            bandera = false;
        }
        
        if(this.jTNombreResponsable.getText().trim().length() == 0){
            JOptionPane.showMessageDialog(this,"Debe cargar un nombre de responsable, asigne un guion - si no corresponde","Se encontro un campo vacio",JOptionPane.WARNING_MESSAGE);
            bandera = false;
        }
        if(this.jTNombreResponsable.getText().trim().length() > this.CAMPO_RESPONSABLE){
            JOptionPane.showMessageDialog(this,"Nombre de responsable, debe tener como maximo "+this.CAMPO_RESPONSABLE+" letras","El campo supera la cantidad de letras permitidas",JOptionPane.WARNING_MESSAGE);
            bandera = false;
        }
        
        if(this.jTNombreConductor.getText().trim().length() == 0){
            JOptionPane.showMessageDialog(this,"Debe cargar un nombre de conductor, asigne un guion - si no corresponde","Se encontro un campo vacio",JOptionPane.WARNING_MESSAGE);
            bandera = false;
        }
        if(this.jTNombreConductor.getText().trim().length() > this.CAMPO_NOMBRECONDUCTOR){
            JOptionPane.showMessageDialog(this,"Nombre de responsable, debe tener como maximo "+this.CAMPO_NOMBRECONDUCTOR+" letras","El campo supera la cantidad de letras permitidas",JOptionPane.WARNING_MESSAGE);
            bandera = false;
        }
        
        if(this.jTNombreConstructor.getText().trim().length() == 0){
            JOptionPane.showMessageDialog(this,"Debe cargar un nombre de conductor, asigne un guion - si no corresponde","Se encontro un campo vacio",JOptionPane.WARNING_MESSAGE);
            bandera = false;            
        }
        if(this.jTNombreConstructor.getText().trim().length() > this.CAMPO_NOMBRECONSTRUCTOR){
            JOptionPane.showMessageDialog(this,"Nombre de responsable, debe tener como maximo "+this.CAMPO_NOMBRECONSTRUCTOR+" letras","El campo supera la cantidad de letras permitidas",JOptionPane.WARNING_MESSAGE);
            bandera = false;
        }
        
        // controlar ubicacion de la obra
        if(this.jTBarrio.getText().trim().length() == 0)
            bandera = false;
        
        if(this.jTCalle.getText().trim().length() == 0){
            JOptionPane.showMessageDialog(this,"Debe cargar un nombre de calle, asigne un guion - si no corresponde","Se encontro un campo vacio",JOptionPane.WARNING_MESSAGE);
            bandera = false;
        }
        if(this.jTCalle.getText().trim().length() > this.CAMPO_CALLE){
            JOptionPane.showMessageDialog(this,"Nombre de calle, debe tener como maximo "+this.CAMPO_CALLE+" letras","El campo supera la cantidad de letras permitidas",JOptionPane.WARNING_MESSAGE);
            bandera = false;
        }
        
        if(this.jTNumero.getText().trim().length() == 0){
            JOptionPane.showMessageDialog(this,"Debe cargar un numero de la ubicacion, asigne un guion - si no corresponde","Se encontro un campo vacio",JOptionPane.WARNING_MESSAGE);
            bandera = false;
        }
        if(this.jTNumero.getText().trim().length() > this.CAMPO_NUMERO){
            JOptionPane.showMessageDialog(this,"El numero de la ubicacion, debe tener como maximo "+this.CAMPO_CALLE+" digitos","El campo supera la cantidad de letras permitidas",JOptionPane.WARNING_MESSAGE);
            bandera = false;
        }
        
        if(this.jTManzana.getText().trim().length() == 0){
            JOptionPane.showMessageDialog(this,"Debe cargar la manzana de la ubicacion, asigne un guion - si no corresponde","Se encontro un campo vacio",JOptionPane.WARNING_MESSAGE);
            bandera = false;
        }
        if(this.jTManzana.getText().trim().length() > this.CAMPO_MANZANA){
            JOptionPane.showMessageDialog(this,"La manzana de la ubicacion, debe tener como maximo "+this.CAMPO_MANZANA+" letras","El campo supera la cantidad de letras permitidas",JOptionPane.WARNING_MESSAGE);
            bandera = false;
        }
        
        if(this.jTLote.getText().trim().length() == 0){
            JOptionPane.showMessageDialog(this,"Debe cargar el lote de la ubicacion, asigne un guion - si no corresponde","Se encontro un campo vacio",JOptionPane.WARNING_MESSAGE);
            bandera = false;
        }
        if(this.jTLote.getText().trim().length() > this.CAMPO_LOTE){
            JOptionPane.showMessageDialog(this,"El lote de la ubicacion, debe tener como maximo "+this.CAMPO_LOTE+" letras","El campo supera la cantidad de letras permitidas",JOptionPane.WARNING_MESSAGE);
            bandera = false;
        }
        
        // controlar las tasas aplicadas
        if(this.jTSuperficieTotal.getText().trim().length() == 0)
            bandera = false;
        if(this.jTTotal.getText().trim().length() == 0)
            bandera = false;
        
        //Controlar leyenda
        if(this.jTLeyenda.getText().trim().length() == 0){
            JOptionPane.showMessageDialog(this,"Debe cargar la leyenda a imprimir, asigne un guion - si no corresponde","Se encontro un campo vacio",JOptionPane.WARNING_MESSAGE);
            bandera = false;
        }
        if(this.jTLeyenda.getText().trim().length() > this.CAMPO_LEYENDA){
            JOptionPane.showMessageDialog(this,"La leyenda de impresion, debe tener como maximo "+this.CAMPO_LEYENDA+" letras","El campo supera la cantidad de letras permitidas",JOptionPane.WARNING_MESSAGE);
            bandera = false;
        }
        //Controlar orden de trabajo
        if(this.jTOrdenTrabajo.getText().trim().length() == 0){
            JOptionPane.showMessageDialog(this,"Debe cargar la orden de trabajo, asigne un guion - si no corresponde","Se encontro un campo vacio",JOptionPane.WARNING_MESSAGE);
            bandera = false;
        }
        if(this.jTOrdenTrabajo.getText().trim().length() > this.CAMPO_ORDENTRABAJO){
            JOptionPane.showMessageDialog(this,"La orden de trabajo, debe tener como maximo "+this.CAMPO_ORDENTRABAJO+" letras","El campo supera la cantidad de letras permitidas",JOptionPane.WARNING_MESSAGE);
            bandera = false;
        }
        
        return bandera;
    }
    
    
    private int guardarTasasSeleccionadas(String serie, long codigo)
   {
       int respuesta = 0;
//       System.out.println("Numero de TASAS pagadas: "+this.tasasSeleccionadas.size());
       
       Iterator it = this.tasasSeleccionadas.iterator();
        CAlta alta = new CAlta();
        while(it.hasNext())
        {
            TasaSeleccionada t = (TasaSeleccionada)it.next();
            t.setCodigoCT(codigo);
            t.setSerieCT(serie);
            respuesta = alta.hacerAlta(t);
        }

       return respuesta;
   }

   
}   
